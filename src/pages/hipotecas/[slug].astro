---
import { getCollection, render } from "astro:content";

import MainLayout from "../../layouts/MainLayout.astro";
import Steps from "../../components/sections/Steps.astro";
import Faqs from "../../components/sections/Faqs.astro";
import Picture from "astro/components/Picture.astro";

export async function getStaticPaths() {
    const mortgages = await getCollection("hipotecas");

    return mortgages.map((mortgage) => ({
        params: { slug: mortgage.slug },
        props: { mortgage },
    }));
}
const { mortgage } = Astro.props;
const { Content } = await render(mortgage);

const title = `${mortgage.data.title} - Mareh Asesores`;
const description = mortgage.data.shortDescription;
const url = Astro.url.href;
---

<MainLayout title={title} description={description} url={url}>
    <main>
        <section class="hero__section contenedor">
            <section>
                <h1 class="hero__title">{mortgage.data.title}</h1>

                <p class="hero__description">{mortgage.data.description}</p>
            </section>

            <div class="hero__image-container">
                {
                    mortgage.data.heroImage && (
                        <Picture
                            src={mortgage.data.heroImage}
                            alt="House image"
                            class="hero__image"
                        />
                    )
                }

                <div class="image-background"></div>
            </div>
        </section>

        <section class="benefits contenedor">
            <h2 class="benefits__title product-page__title">Beneficios</h2>

            <ul class="disco-list-style">
                {mortgage.data.benefits.map((benefit) => <li>{benefit}</li>)}
            </ul>
        </section>

        <section class="contenedor">
            <h2 class="product-page__title">Requisitos básicos</h2>

            <ul class="disco-list-style">
                {
                    mortgage.data.requirements.map((requirement) => (
                        <li>{requirement}</li>
                    ))
                }
            </ul>
        </section>

        <section class="contenedor">
            <h2 class="product-page__title">Características y condiciones</h2>

            <ul class="disco-list-style">
                {mortgage.data.features.map((feature) => <li>{feature}</li>)}
            </ul>
        </section>

        <Steps />

        <Faqs />
    </main>
</MainLayout>

<style>
    .hero__section {
        margin-top: 6rem;
    }

    @media (width >= 1024px) {
        .hero__section {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            align-items: center;
            padding-block-start: 3rem;
        }
    }

    .hero__title {
        font-size: 2rem;
        font-weight: 500;
        margin-block-end: 1rem;
        text-align: center;
        color: #104e64;
    }

    @media (width >= 1024px) {
        .hero__title {
            text-align: left;
        }
    }

    @media (width >= 1440px) {
        .hero__title {
            font-size: 2.8rem;
        }

        .hero__description {
            font-size: 1.12rem;
        }
    }

    .hero__image-container {
        position: relative;
    }

    .hero__image {
        max-width: 14.8rem;
        margin-inline: auto;
    }

    @media (width >= 1024px) {
        .hero__image {
            max-width: 20rem;
        }
    }

    @media (width >= 1440px) {
        .hero__image {
            max-width: 25rem;
        }
    }

    .image-background {
        position: absolute;
        width: 200px;
        height: 200px;
        border-radius: 50%;
        aspect-ratio: 1 / 1;
        background-image: linear-gradient(to top, #135eff 50%, #07d4db 100%);
        bottom: 0;
        left: 50%;
        transform: translateX(-30%) translateY(-10%);
        z-index: -10;
    }

    @media (width >= 1024px) {
        .image-background {
            width: 300px;
            height: 300px;
        }
    }

    .product-page__title {
        font-size: 1.5rem;
        margin-block: 1rem;
        font-weight: 600;
        color: #104e64;
    }

    .disco-list-style {
        list-style: disc;
        list-style-position: inside;
    }
</style>
