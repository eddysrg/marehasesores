---
import MainLayout from "../layouts/MainLayout.astro";
import { Picture } from "astro:assets";
import imageHero from "../assets/images/house_hero.png";
import CreditStep from "../components/CreditStep.astro";
import imgCreditStep from "../assets/images/little_house.png";
import aboutUsImage from "../assets/images/aboutusimage.jpg";
import houseCredit from "../assets/images/house_credit.png";
import percentage from "../assets/images/percentage.png";
import interest from "../assets/images/interest.png";
import billete from "../assets/images/billete.png";
import billetes from "../assets/images/billetes.png";
import GrcLogo from "../assets/grc_logo.svg";
import livingRoom from "../assets/images/living-room-blue.jpg";
import Faq from "../components/Faq.astro";

// Importar Swiper CSS
import 'swiper/css';
import 'swiper/css/navigation';
import 'swiper/css/pagination';

//

import aboutPicture from "../assets/images/about-picture.jpg";

// Importar imágenes de testimonios
import testimonial01 from "../assets/images/testimonials/testimonial01.jpeg";
import testimonial02 from "../assets/images/testimonials/testimonial02.jpeg";
import testimonial03 from "../assets/images/testimonials/testimonial03.jpeg";
import testimonial04 from "../assets/images/testimonials/testimonial04.jpeg";

const title =
	"Mareh Asesores - Encuentra la mejor hipoteca para tu hogar con expertos";

// Datos de testimonios
const testimonios = [
	{
		nombre: "María González",
		ubicacion: "Guadalajara, Jalisco",
		texto: "Al principio tenía muchas dudas, pero desde el principio me explicaron todo muy claro y sin presionarme a decidir. Siempre estuvieron al pendiente y contestaban rápido. Me sentí acompañada en todo el proceso.",
		rating: 5,
		image: testimonial01
	},
	{
		nombre: "Carlos Rodríguez",
		ubicacion: "Monterrey, Nuevo León", 
		texto: "Solo puedo decir gracias. Estaba pagando mucho por mi hipoteca y no sabía que podía cambiarla. Me ayudaron a revisar opciones sin compromiso y al final terminé firmando con otro banco con una tasa más baja. Todo fue muy transparente.",
		rating: 5,
		image: testimonial02
	},
	{
		nombre: "Ana Martínez",
		ubicacion: "Querétaro, Querétaro",
		texto: "Mi pareja y yo pensábamos que esto de comprar casa iba a ser un caos, pero fue más sencillo de lo que esperábamos. Nos explicaron todo desde cero y nos guiaron paso por paso. Incluso nos ayudaron con los papeles y nos recomendaron notaría.",
		rating: 5,
		image: testimonial03
	},
	{
		nombre: "Luis Pérez",
		ubicacion: "Puebla, Puebla",
		texto: "Pensé que sería más difícil conseguir el crédito con Cofinavit, me explicaron cómo funciona, armaron mi expediente y al final logré comprar mi depa.",
		rating: 5,
		image: testimonial04
	}
];
---

<MainLayout title={title}>
	<main>
		<section class="mt-24">
			<div class="hero my-5 contenedor py-16 rounded-2xl p-5 lg:flex lg:items-center lg:p-20">
				<section>
					<h1 class="text-white text-3xl font-medium text-center mb-4 lg:text-6xl lg:text-left">
						Tu nuevo hogar más cerca de lo que <span class="text-cyan-200">imaginas</span>
					</h1>
					<span class="block text-neutral-100 text-center lg:text-left">
						En Mareh Asesores te ayudamos a encontrar el crédito
						hipotecario ideal para ti. Compara opciones, recibe
						asesoría personalizada y da el primer paso hacia tu
						nuevo hogar.
					</span>

					<section class="flex flex-col mt-8 gap-8 lg:flex-row">
						<button>
							<a
								class="bg-white px-4 py-4 xl:py-3 rounded-md font-medium"
							>
								Simula tu crédito gratis
								<i class="ri-arrow-right-up-line"></i>
							</a>
						</button>

						<button>
							<a href="" class="text-white font-medium">
								Conoce más
							</a>
						</button>
					</section>
				</section>

				<section class="hidden lg:block">
					<div class="">
						<Picture src={imageHero} alt="about us image" class="rounded-md mask-b-from-20% lg:mask-b-to-80%" />
					</div>
				</section>
			</div>
		</section>

		<section class="pt-10 lg:pt-20">
			<div class="contenedor">
				<header>
					<div class="flex justify-center mb-2">
						<span class="text-xs text-cyan-700 p-2 border border-cyan-700 rounded-md">
							+10 años de experiencia
						</span>
					</div>
	
					<h2 class="text-center text-3xl text-cyan-900 font-medium mb-5 lg:mb-10">
						Más que un crédito, es tranquilidad y las mejores
						condiciones
					</h2>
				</header>

				<div class="lg:grid lg:grid-cols-2">
					<section class="w-52 lg:w-80 xl:w-96 mx-auto">
						<Picture src={aboutPicture} alt="about us image" class="rounded-md" />
					</section>

					<section class="space-y-3 mt-10 text-zinc-700">
						<p>
							En <span class="font-semibold text-cyan-700">Mareh Asesores</span>  creemos que un crédito hipotecario no
							solo es un trámite financiero: es el paso más importante
							para construir tu patrimonio. Por eso, combinamos
							experiencia, cercanía y honestidad para ayudarte a tomar
							decisiones claras y seguras.
						</p>
	
						<p>
							Con más de 10 años de experiencia, cientos de clientes
							felices y alianzas con los principales bancos en México,
							estamos listos para acompañarte.
						</p>

						<div class="mt-3">

							<h3 class="font-semibold text-cyan-700">Nuestra promesa:</h3>
		
							<ul class="text-sm mt-3 space-y-3 font-medium">
								<li>
									<i class="ri-check-line text-zinc-400"></i>
									Asesoría gratuita y personalizada
								</li>
								<li>
									<i class="ri-check-line text-zinc-400"></i>
									Transparencia total
								</li>
								<li>
									<i class="ri-check-line text-zinc-400"></i>
									Acompañamiento humano
								</li>
								<li>
									<i class="ri-check-line text-zinc-400"></i>
									Resultados reales
								</li>
								<li>
									<i class="ri-check-line text-zinc-400"></i>
									Diferentes opciones de acuerdo a tu perfil
								</li>
							</ul>
						</div>
					</section>
				</div>


			</div>
		</section>

		<section class="pt-10 lg:pt-20">
			<div class="contenedor">
				<h2 class="text-center text-3xl text-cyan-900 font-medium mb-5">
					Todas las opciones de crédito para cada necesidad
				</h2>
				<p class="text-zinc-700 text-center">
					Ya sea que quieras comprar tu nueva casa, invertir o crear
					un nuevo proyecto
				</p>

				<section class="space-y-5 md:space-y-0 mt-5 md:grid md:grid-cols-2 lg:grid-cols-3 md:gap-5">
					<div class="credit-card relative">
						<h3 class="text-neutral-100 text-2xl font-medium mb-3">Crédito de adquisición</h3>
						<p class="text-zinc-200">El camino directo para adquirir el hogar que sueñas.</p>

						<Picture src={houseCredit} alt="house credit" class="w-44 mx-auto" />

						<div class="absolute w-12 h-12 bg-white rounded-md bottom-5 right-5 flex justify-center items-center">
							<i class="ri-add-large-line text-xl"></i>
						</div>
					</div>	

					<div class="credit-card relative">
						<h3 class="text-neutral-100 text-2xl font-medium mb-3">Crédito de liquidez</h3>
						<p class="text-zinc-200">Usa tu propiedad para obtener la liquidez que necesitas para tus proyectos personales o de inversión.</p>

						<Picture src={billetes} alt="house credit" class="w-44 mx-auto" />

						<div class="absolute w-12 h-12 bg-white rounded-md bottom-5 right-5 flex justify-center items-center">
							<i class="ri-add-large-line text-xl"></i>
						</div>
					</div>
					
					<div class="credit-card relative md:col-span-2 lg:col-span-1">
						<h3 class="text-neutral-100 text-2xl font-medium mb-3">Mejora de hipoteca</h3>
						<p class="text-zinc-200">Refinancia tu crédito actual y reduce tus pagos mensuales o mejora tu tasa de interés.</p>

						<Picture src={interest} alt="house credit" class="w-44 mx-auto" />

						<div class="absolute w-12 h-12 bg-white rounded-md bottom-5 right-5 flex justify-center items-center">
							<i class="ri-add-large-line text-xl"></i>
						</div>
					</div>
				</section>

				<div class="flex justify-center mt-10">
					<a href="" class="bg-cyan-700 text-white px-4 py-4 rounded-md font-medium">
						Ver todos los créditos
						<i class="ri-corner-right-up-fill"></i>
					</a>
				</div>
			</div>
		</section>

		<section class="pt-10 lg:pt-20 lg:mb-20">
			<div class="contenedor">
				<header>
					<div class="flex justify-center mb-2">
						<span class="text-xs text-cyan-700 px-5 py-2 border border-cyan-700 rounded-md">
							Pasos
						</span>
					</div>
					<h2 class="text-center text-3xl text-cyan-900 font-medium mb-5">
						Tu crédito hipotecario en solo 3 pasos
					</h2>
				</header>
				
				<section class="steps-grid-container">
					<div class="border-2 border-dashed border-zinc-400 rounded-md p-5 flex items-center gap-5 overflow-hidden step">

						<div>
							<i class="ri-cash-fill text-4xl step-icon--one"></i>
						</div>

						<div>
							<h3 class="text-cyan-900 font-semibold flex items-center gap-1">
								Simula tu crédito
								<i class="ri-arrow-down-double-line step-icon-arrow"></i>
							</h3>
							<p class="text-zinc-700 text-sm max-h-0 opacity-0 transition-all duration-500 ease-in-out step-text">
								Llena un formulario rápido y descubre cuánto puedes obtener.
							</p>
						</div>
					</div>

					<div class="hidden step-connector">
						<div class="step-connector-dot"></div>
						<div class="step-connector-dot"></div>
						<div class="step-connector-dot"></div>
						<div class="step-connector-dot"></div>
						<div class="step-connector-dot"></div>
						<div class="step-connector-dot"></div>
						<div class="step-connector-dot"></div>
					</div>

					<div class="border-2 border-dashed border-zinc-400 rounded-md p-5 flex items-center gap-5 overflow-hidden step">

						<div>
							<i class="ri-phone-fill text-4xl step-icon--two"></i>
						</div>

						<div>
							<h3 class="text-cyan-900 font-semibold flex items-center gap-1">
								Habla con tu asesor
								<i class="ri-arrow-down-double-line step-icon-arrow"></i>
							</h3>
							<p class="text-zinc-700 text-sm max-h-0 opacity-0 transition-all duration-500 ease-in-out step-text">
								Te explicamos las opciones de crédito y te ayudamos a tomar la mejor decisión.
							</p>
						</div>
					</div>

					<div class="hidden step-connector">
						<div class="step-connector-dot"></div>
						<div class="step-connector-dot"></div>
						<div class="step-connector-dot"></div>
						<div class="step-connector-dot"></div>
						<div class="step-connector-dot"></div>
						<div class="step-connector-dot"></div>
						<div class="step-connector-dot"></div>
					</div>

					<div class="border-2 border-dashed border-zinc-400 rounded-md p-5 flex items-center gap-5 overflow-hidden step">

						<div>
							<i class="ri-home-smile-fill text-4xl step-icon--three"></i>
						</div>

						<div>
							<h3 class="text-cyan-900 font-semibold flex items-center gap-1">
								Estrena tu casa
								<i class="ri-arrow-down-double-line step-icon-arrow"></i>
							</h3>
							<p class="text-zinc-700 text-sm max-h-0 opacity-0 transition-all duration-500 ease-in-out step-text">
								Te acompañamos en cada paso para que tengas la tranquilidad de que todo está bajo control.
							</p>
						</div>
					</div>
				</section>
			</div>
		</section>

		<section class="pt-10 lg:pt-20">
			<div class="contenedor xl:flex xl:items-center xl:justify-between">
				<header>
					<span class="text-xs text-cyan-700 px-5 py-2 border border-cyan-700 rounded-md block w-fit mb-2">
						Testimoniales
					</span>
					<h2 class="text-3xl text-cyan-900 font-medium mb-5">
						Historias de éxito: Lo que dicen nuestros clientes
					</h2>

					<p class="text-zinc-700">
						La satisfacción de nuestros clientes es nuestro mayor orgullo. Conoce cómo hemos ayudado a personas como tú a lograr sus metas.
					</p>
				</header>

				<div class="testimonials-swiper">
					<div class="swiper-wrapper">
						{testimonios.map((testimonio) => (
							<div class="swiper-slide">
								<div class="bg-white p-6 rounded-lg shadow-lg border border-gray-100">
									<div class="flex items-center mb-4">
										<div class="flex text-yellow-400">
											{Array.from({ length: testimonio.rating }).map(() => (
												<i class="ri-star-fill"></i>
											))}
										</div>
									</div>
									
									<p class="text-gray-700 mb-4 italic">
										"{testimonio.texto}"
									</p>
									
									<div class="flex items-center justify-between">
										<div>
											<h4 class="font-semibold text-gray-900">{testimonio.nombre}</h4>
											<p class="text-sm text-gray-500">{testimonio.ubicacion}</p>
										</div>
										<div class="w-12 h-12 bg-cyan-100 rounded-full flex items-center justify-center overflow-hidden">
											<Picture src={testimonio.image} alt="testimonial image" class="w-12 h-12 rounded-full object-cover" />
										</div>
									</div>
								</div>
							</div>
						))}
					</div>
					
					<div class="swiper-pagination"></div>
				</div>
			</div>
		</section>

		<section
			class="bg-[url('../assets/images/living-room-blue.webp')] bg-no-repeat bg-cover bg-center"
		>
			<div class="w-[80%] lg:w-[50%] mx-auto py-20">
				<h2 class="text-white text-center mb-10 text-2xl font-medium">
					Tu aliado para encontrar tu nuevo hogar
				</h2>
				<p class="text-white text-center">
					Encontrar la propiedad ideal es clave. Por eso, colaboramos
					con inmobiliarias de confianza que te ayudarán a buscar y
					encontrar tu casa.
				</p>

				<div class="flex justify-center mt-8">
					<a
						href=""
						class="bg-white px-5 py-2 rounded-md text-sm flex gap-1 items-center"
						>Checa estas opciones<i class="ri-home-smile-line"
						></i></a
					>
				</div>
			</div>
		</section>

		<section class="bg-zinc-100">
			<div class="contenedor">
				<h2 class="subtitle text-center">Preguntas frecuentes</h2>

				<div class="space-y-5">
					<Faq title="¿El trámite es gratuito?">
						Nuestro servicio no tiene ningun costo. Nosotros nos
						encargamos de gestionar todo el proceso sin que tengas
						que preocuparte por honorarios adicionales. Queremos que
						te concentres en lo más importante: encontrar la casa de
						tus sueños.
					</Faq>

					<Faq title="¿Cuál es el mejor crédito hipotecario?">
						El mejor crédito hipotecario depende de tus necesidades.
						Consideramos tasas, plazos, costos y condiciones para
						ofrecerte opciones personalizadas. Trabajamos con
						múltiples instituciones para ayudarte a encontrar la
						opción más favorable. ¿Tienes dudas o necesidades
						específicas? Contáctanos, estamos aquí para asesorarte.
						🏡💼
					</Faq>

					<Faq title="¿En cuánto tiempo queda autorizado mi crédito?">
						El tiempo de autorización de un crédito hipotecario
						varía según la institución y el caso, pero suele tomar
						entre 24 y 72 horas. En Mareh, agilizamos el proceso y
						te mantenemos informado en cada paso. ¿Preguntas?
						¡Estamos aquí para ayudarte! 🕒🏡
					</Faq>
				</div>
			</div>
		</section>
	</main>
</MainLayout>

<style>
	.hero {
		background-image: linear-gradient(
			-225deg,
			#473b7b 0%,
			#3584a7 51%,
			#30d2be 100%
		);
	}

	.credit-card:nth-child(1) {
		background: linear-gradient(90deg, hsla(236, 100%, 8%, 1) 0%, hsla(211, 100%, 28%, 1) 100%);
		padding: 2rem;
		border-radius: 1rem;
	}

	.credit-card:nth-child(2) {
		background-image: linear-gradient(to top, #00c6fb 0%, #005bea 100%);
		padding: 2rem;
		border-radius: 1rem;
	}

	.credit-card:nth-child(3) {
		background-image: linear-gradient(15deg, #13547a 0%, #80d0c7 100%);
		padding: 2rem;
		border-radius: 1rem;
	}

	.step-icon--one {
		background: linear-gradient( 75.1deg,  rgba(34,126,34,1) 6%, rgba(99,226,17,1) 84.3% );
		background-clip: text;
		-webkit-text-fill-color: transparent;
	}

	.step-icon--two {
		background: linear-gradient( 109.6deg,  rgba(166,64,221,1) 21.2%, rgba(102,165,235,1) 74.4% );
		background-clip: text;
		-webkit-text-fill-color: transparent;
	}

	.step-icon--three {
		background: radial-gradient( circle farthest-corner at 10% 20%,  rgba(0,105,148,1) 15.6%, rgba(0,163,217,1) 51.9%, rgba(0,194,226,1) 81% );
		background-clip: text;
		-webkit-text-fill-color: transparent;
	}

	.step-active {
		overflow: visible;
	}

	.step-text--active {
		max-height: 300px;
		opacity: 1;
	}

	.steps-grid-container {
		display: grid;
		row-gap: 1rem;
	}

	@media (1280px >= width >= 1024px) {

	}

	@media (width >= 1024px) {

		.step {
			flex-direction: column;
			align-items: center;
		}

		.step h3 {
			justify-content: center;
		}

		.step-icon-arrow {
			display: none;
		}

		.step p {
			opacity: 1;
			max-height: 300px;
			text-align: center;
			margin-top: 1rem;
		}

		.steps-grid-container {
			grid-template-columns: 1fr 150px 1fr 150px 1fr;
		}

		.step-connector {
			display: flex;
			justify-content: center;
			align-items: center;
			gap: 10px;
		}
	
		.step-connector-dot {
			width: 5px;
			height: 5px;
			background-color: rgb(183, 183, 183);
			border-radius: 50%;
		}
	}

	.testimonials-swiper {
		--swiper-pagination-color: var(--color-cyan-700);
		position: relative;
		margin-top: 1rem;
		width: 100%;
		height: 400px;
		overflow: hidden;	
	}

	.swiper-slide {
		height: 100%;
	}

</style>

<script>
	// Importar Swiper dinámicamente
	import('swiper').then(({ default: Swiper }) => {
		import('swiper/modules').then(({ Navigation, Pagination, Autoplay }) => {
			//Inicialización de Swiper para testimonios
			const testimonialsSwiper = new Swiper('.testimonials-swiper', {
				modules: [Navigation, Pagination, Autoplay],
				slidesPerView: 1,
				spaceBetween: 30,
/* 				loop: false,
				autoplay: {
					delay: 5000,
					disableOnInteraction: false,
				}, */
				pagination: {
					el: '.swiper-pagination',
					clickable: true,
					
				},
				breakpoints: {
					768: {
						slidesPerView: 2,
					},
				},
			});
		});
	});

	// Funcionalidad de los pasos
	const steps = document.querySelectorAll('.step');

	steps.forEach(step => {

		const stepIconArrow = step.querySelector('.step-icon-arrow');
		const stepText = step.querySelector('.step-text');

		step.addEventListener('click', () => {

			const isActive = step.classList.contains('step-active');

			// Cerrar todos los otros acordeones
			steps.forEach(otherStep => {
				otherStep.classList.remove('step-active');
				otherStep.querySelector('.step-icon-arrow')?.classList.remove('ri-arrow-up-double-line');
				otherStep.querySelector('.step-icon-arrow')?.classList.add('ri-arrow-down-double-line');
				otherStep.querySelector('.step-text')?.classList.remove('step-text--active');
			});

			if(!isActive) {
				step.classList.add('step-active');
				stepText?.classList.add('step-text--active');
				stepIconArrow?.classList.add('ri-arrow-up-double-line');
			}
			
		});
	});
</script>